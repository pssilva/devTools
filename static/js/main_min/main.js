(function(b){function a(){this._flightDepartureDate=null;this._flightArrivalDate=null}b.mainBuscaFacil={flag:0,outBoundList:null,inBoundList:null,checkoutForm:null,objIda:null,objVolta:null,searchData:null,clickFilter:false,templatePassengerAdl:null,templatePassengerChd:null,clickMenuUser:false,rotateSlider:null,ccdLimits:null,monthlySpend:0,__construction:function(){return new a()},init:function(){var e=b("#flight-departure-date");var d=b("#flight-arrival-date");var c=0;function f(g){function h(k){return(k<10)?"0"+k:k}var j=(g==undefined)?new Date():new Date(g);return[h(j.getDate()),h(j.getMonth()+1),j.getFullYear()].join("/")}},autocomplete:function(){var e=this;var d;var c={};b.getJSON("static/data/airports_BRA.json",function(g,f,h){d=g});b("#select-flight").autocomplete({source:function(j,g){var h=j.term;if(h in c){g(c[h]);return}var f=[];b.each(d,function(l,n){var m=new RegExp("(?="+e.tratarAlias(j.term.toLowerCase())+")");if(m.test(e.tratarAlias(n.code.toLowerCase()))||m.test(e.tratarAlias(n.tokens.toString().toLowerCase()))||m.test(e.tratarAlias(n.display_name.toString().toLowerCase()))){f.push(n)}});c[h]=f;g(f)},minLength:3,select:function(f,g){b("#departure").val(g.item.code);this.value=g.item.display_name;return false},change:function(f,g){if(g.item==null){b("#departure").val("");this.value=""}}}).autocomplete("instance")._renderItem=function(f,g){return b("<li>").append("<a>"+g.display_name+"</a>").appendTo(f)};b("#flight-destination").autocomplete({source:function(j,g){var h=j.term;if(h in c){g(c[h]);return}var f=[];b.each(d,function(l,n){var m=new RegExp("(?="+e.tratarAlias(j.term.toLowerCase())+")");if(m.test(e.tratarAlias(n.code.toLowerCase()))||m.test(e.tratarAlias(n.tokens.toString().toLowerCase()))||m.test(e.tratarAlias(n.display_name.toString().toLowerCase()))){f.push(n)}});c[h]=f;g(f)},minLength:3,select:function(f,g){b("#arrival").val(g.item.code);this.value=g.item.display_name;return false},change:function(f,g){if(g.item==null){b("#arrival").val("");this.value=""}}}).autocomplete("instance")._renderItem=function(f,g){return b("<li>").append("<a>"+g.display_name+"</a>").appendTo(f)}},datepicker:function(){var c=this;b("#flight-departure-date").datepicker({defaultDate:"1",minDate:"0D",showButtonPanel:true,numberOfMonths:2,onClose:function(d){b("#flight-arrival-date").datepicker("option","defaultDate",d);b("#flight-arrival-date").datepicker("option","minDate",d);b("#flight-arrival-date").val(d)},onSelect:function(f,e){if(!c.validGol(f)){var d=b("#flag-company > label:nth-child(3)");d.find("input").attr({checked:false,disabled:"disabled"}).parent().addClass("disabled-radio");d.find("img").attr("src","static/img/flag-gol-gray.gif");b("#searchWarning").slideDown(300)}else{var d=b("#flag-company > label:nth-child(3)");d.find("input").removeAttr("disabled").parent().removeClass("disabled-radio");d.find("img").attr("src","static/img/flag-gol.gif");b("#searchWarning").slideUp(300)}}});b("#flight-arrival-date").datepicker({showButtonPanel:true,numberOfMonths:2,onClose:function(d){b("#flight-departure-date").datepicker("option","defaultDate",d)}})},checkSearchDirectionFlight:function(){b("input[name='trip']").change(function(){if(b("input[name='trip']:checked").val()=="RoundTrip"){b("#flight-arrival-date").parent().removeClass("hide");b("#checkout-return").find("span").removeClass("hidden");b("#date-flight-inbound").removeClass("hide");b(".filter-options-inbound").removeClass("hide")}else{if(b("input[name='trip']:checked").val()=="OneWay"){b("#flight-arrival-date").parent().addClass("hide");b("#checkout-return").find("span").addClass("hidden");b("#date-flight-inbound").addClass("hide");b(".filter-options-inbound").addClass("hide")}else{b("output").text("c changed")}}})},checkoutModal:function(){var c=this;b("#checkout-go").on("click",function(d){d.preventDefault();b("#count > li:nth-child(1) > span:nth-child(1)").addClass("active-step");b("#count > li:nth-child(1)").attr("step","next-step1");b("#checkout-steps-holder > div:nth-child(1)").addClass("ativo");b("#md-block").show();b("#md-block, #content-modal").addClass("md-show");b("#md-overlay").addClass("visible");b("body").addClass("overflow");b("#checkout-steps-holder > div.step-box").hide();b("#checkout-steps-holder > div.step-box:first").show();b("#checkout-steps-holder > div.step-box div#success").addClass("hide");b("#checkout-steps-holder > div.step-box div#error").addClass("hide");b("#checkout-steps-holder > div.step-box div#processing").removeClass("hide");b("#step2 > p").html(b("#heade-summary > h2").html());c.changeradioParcelas()});b("#bt-opt-pay").on("click",function(d){d.preventDefault();b("#md-block-pagamento, #content-modal-pagamento").addClass("md-show");b("#md-overlay-pagamento").addClass("visible");b("body").addClass("overflow")});b(".md-close, .bt-cancel").on("click",function(d){d.preventDefault();b("#count li span").removeClass("active-step");b("#md-block").hide();b("#md-block, #content-modal, #md-block-pagamento, #content-modal-pagamento").removeClass("md-show");b("#md-overlay, #md-overlay-pagamento").removeClass("visible");b("body").removeClass("overflow");b(".content-card-show, #step3-dados-cartao").find("input[type='text']").val("");b(".content-card-show, #step3-dados-cartao").find("input[type='radio']").prop("checked",false);b("#select-form-parcela03").prop("checked",true);b("#select-radio-payment-billet").prop("checked",true);b(".content-value-card").fadeOut(300);b("#parcelas").val("0");b("#estados").val("UF").change();c.changeradioParcelas()})},Search:function(){var d="";var c=this;b("#bt-search").on("click",function(f){f.preventDefault();if(!b("#main-search").valid()){console.log('!$("#main-search").valid()');return false}var e=b("form#main-search").serializeArray();b("body").addClass("modal-active");c.frasesLoading();b.ajax({type:"POST",data:b("form#main-search").serializeArray(),url:"ajax/search_flight.ajx.php",dataType:"json"}).done(function(g){if(g.status==200){if(d==""){b.get("static/js/tpl/searchFlight.handlebars",function(h){d=h;c.searchCallback(d,g)},"html")}else{c.searchCallback(d,g)}}else{if(g.status==502){document.location.reload(true)}else{alert(g.error)}}})});b("#checkbox-direct-flight").on("click",function(e){if(c.inBoundList!=null&&b(this).is(":checked")){c.outBoundList.filter(function(f){return(f.values().legs==0)});c.inBoundList.filter(function(f){return(f.values().legs==0)});return true}else{if(c.inBoundList!=null){c.outBoundList.filter();c.inBoundList.filter();return true}}})},searchCallback:function(d,f){var e=this;var d=Handlebars.compile(d);var c=d(f.searchData);b("#list-flights").html(c).show(500,function(){b("body").removeClass("modal-active");e.frasesLoading("clearInterval");e.checkoutModal();e.labelCf();e.resultFix();e.filtroFix();e.menuSort();e.clickManuSort();e.triggerResult();e.ccdLimits=f.searchData.CCD_LIMITS;e.monthlySpend=f.searchData.MONTHLY_SPEND;var h={valueNames:["flight-cia","legs","origin","destination","duration","flyer-points","cia-price","price-milhasfacil","earn-money","has-promo","departure-time","arrival-time"],listClass:"listOutbound"};e.outBoundList=new List("list-outbound",h);h.listClass="listInbound";e.inBoundList=new List("list-inbound",h);var g=b("#checkbox-direct-flight");if(e.inBoundList!=null&&g.is(":checked")){e.outBoundList.filter(function(j){return(j.values().legs==0)});e.inBoundList.filter(function(j){return(j.values().legs==0)});return true}b("#dados-passageiros").removeClass("done");b("#step2-card-chd-outbound").addClass("hide").find(".cloned-element").html("");b("#step2-card-adl-outbound").addClass("hide").find(".cloned-element").html("");b("#step2-card-chd-inbound").addClass("hide").find(".cloned-element").html("");b("#step2-card-adl-inbound").addClass("hide").find(".cloned-element").html("")})},validSearch:function(e,d){var c=b("#"+d);return c.valid()},toggleRadio:function(){b("#radio-direct-flight").click(function(){if(b("#radio-direct-flight").prop("checked")){b("#radio-direct-flight").prop("checked",true)}if(!b("#radio-direct-flight").prop("checked")){b("#radio-direct-flight").prop("checked",false)}})},labelCf:function(){var d=this;var c=true;if(b("#passengers-adl-template > div:nth-child(1)").length>0){d.templatePassengerAdl=b("#passengers-adl-template > div:nth-child(1)");d.templatePassengerChd=b("#passengers-chd-template > div:nth-child(1)")}b(".cf").on("click",function(e){e.preventDefault();var o=b(this).parent();var r=this;var q=o.data("calculated-fares");var g=(o.hasClass("card-going"))?"#checkout-departure":"#checkout-return";var h=false;var l=q.PAX.QTD_PAX_CHD>0;var f={installments:Array(0,0,0,0,0,0,0,0,0,0,0,0),totals:Array(0,0,0,0,0,0,0,0,0,0,0,0)};var n=b("#list-outbound");var m=b("#list-inbound");var p=function(){if(q.INV.PRICE_SUM>0){var v=(o.hasClass("card-promo"))?"card-promo":"";var I=(o.hasClass("card-expensive"))?"card-expensive":"";var L=(o.hasClass("card-expensive-chd"))?"card-expensive-chd":"";var y=(o.hasClass("card-expensive-adl"))?"card-expensive-adl":"";var F=(o.hasClass("card-promo-chd"))?"card-promo-chd":"";var J=(o.hasClass("card-promo-adl"))?"card-promo-adl":"";var D="",B="",w="";if(l){allClassChd=v+" "+I+" "+L+" "+F}else{B=v+" "+I+" "+y+" "+J}D=v+" "+I+" "+y+" "+J+" "+L+" "+F;var A=(b(this).parent().find(".flight-cia").text()).toLowerCase();var H=b(this).find(".card-flight-number").text();var s=q.MILES.MILES_ADL+q.MILES.MILES_CHD;var K=q.INV.PRICE_SUM;var x=(q.EARN_MONEY_ADL*q.PAX.QTD_PAX_ADL)+(q.EARN_MONEY_CHD*q.PAX.QTD_PAX_CHD);b(g+" > div:nth-child(2) > div").attr("class","cia-"+A+" "+v+" "+I+" "+y+" "+J);b(g+" .checkout-flight-num-resumo").html(H);b(g+" .milhas").html(s.format(0,"","."));b(g+" .price-milhasfacil").html("R$ "+K.format(2,",","."));b(g+" .earn-money").html("R$ "+x.format(2,",","."));for(i=0;i<12;i++){f.installments[i]+=((q.CCD.INSTALLMENTS_ADL[i].parcel)*q.PAX.QTD_PAX_ADL);f.totals[i]+=((q.CCD.INSTALLMENTS_ADL[i].total)*q.PAX.QTD_PAX_ADL);if(l){f.installments[i]+=((q.CCD.INSTALLMENTS_CHD[i].parcel)*q.PAX.QTD_PAX_CHD);f.totals[i]+=((q.CCD.INSTALLMENTS_CHD[i].total)*q.PAX.QTD_PAX_CHD)}}if(g=="#checkout-departure"){n.data("ccd",f);n.data("ccd-oncash",(q.CCD.ONCASH>0)?q.CCD.ONCASH:0);n.data("inv",K);n.find(".td1").css("background-color","#f8f8f7");b(this).find(".td1").css("background-color","#fff");var u=b("#step2-card-chd-outbound").addClass("hide");var E=b("#step2-card-adl-outbound").addClass("hide");var C=(l)?u:E;var t=C.find(".cloned-element");t.html("");C.find("#date").text(b("#date-flight-outbound > div.flag-voo > p:nth-child(2)").text());C.attr("class","cia-"+A+" "+D)}else{m.data("ccd",f);m.data("ccd-oncash",(q.CCD.ONCASH>0)?q.CCD.ONCASH:0);m.data("inv",K);m.find(".td1").css("background-color","#f8f8f7");b(this).find(".td1").css("background-color","#fff");var z=b("#step2-card-chd-inbound").addClass("hide");var G=b("#step2-card-adl-inbound").addClass("hide");var C=(l)?z:G;var t=C.find(".cloned-element");t.html("");C.find("#date").text(b("#date-flight-inbound > div.flag-voo > p:nth-child(2)").text());C.attr("class","cia-"+A+" "+D)}b(this).find(".td2").clone().appendTo(t);b(this).find(".td3").clone().appendTo(t);C.find("#miles").text(s.format(0,"","."));C.find("#boarding-tax").text(q.BOARDING_TAX.format(2,",","."));C.find("#price").text(K.format(2,",","."));C.find("#earn").text(x.format(2,",","."));if(q.PAX.QTD_PAX_CHD>0){C.find("#miles-chd").text(q.MILES.MILES_CHD.format(0,"","."));C.find("#boarding-tax-chd").text(q.BOARDING_TAX.format(2,",","."));C.find("#price-chd").text(q.INV.PRICE_CHD.format(2,",","."));C.find("#earn-chd").text(q.EARN_MONEY_CHD.format(2,",","."));C.find("#miles").text(q.MILES.MILES_ADL.format(0,"","."));C.find("#boarding-tax").text(q.BOARDING_TAX.format(2,",","."));C.find("#price").text(q.INV.PRICE_ADL.format(2,",","."));C.find("#earn").text(q.EARN_MONEY_ADL.format(2,",","."))}else{C.find("#miles").text(s.format(0,"","."));C.find("#boarding-tax").text(q.BOARDING_TAX.format(2,",","."));C.find("#price").text(K.format(2,",","."));C.find("#earn").text(x.format(2,",","."))}C.children().removeClass("card-tam card-gol card-azul").addClass("card-"+A).removeClass("hidden");b(g+" > div:nth-child(2)").addClass("md-show");b(g).children().first().hide(500)}else{b(g).children().first().show(500);if(g=="#checkout-departure"){n.data("ccd",f);n.data("ccd-oncash",0);n.data("inv",0);b(this).find(".td1").css("background-color","#f8f8f7");b("#step2-card-chd-outbound").children().addClass("hidden");b("#step2-card-adl-outbound").children().addClass("hidden")}else{m.data("ccd",f);m.data("ccd-oncash",0);m.data("inv",0);b(this).find(".td1").css("background-color","#f8f8f7");b("#step2-card-chd-inbound").children().addClass("hidden");b("#step2-card-adl-inbound").children().addClass("hidden")}}return j.call(this)};var k=function(){if(g=="#checkout-departure"){n.data("ccd",f);n.data("ccd-oncash",0);n.data("inv",0);b(this).find(".td1").css("background-color","#f8f8f7");b("#step2-card-chd-outbound").children().addClass("hidden");b("#step2-card-adl-outbound").children().addClass("hidden")}else{m.data("ccd",f);m.data("ccd-oncash",0);m.data("inv",0);b(this).find(".td1").css("background-color","#f8f8f7");b("#step2-card-chd-inbound").children().addClass("hidden");b("#step2-card-adl-inbound").children().addClass("hidden")}b(g+" > div:nth-child(2)").removeClass("md-show");b(g).children().first().show(500);return j.call(this)};var j=function(){var u=(n.data("ccd")==0)?{installments:Array(0,0,0,0,0,0,0,0,0,0,0,0),totals:Array(0,0,0,0,0,0,0,0,0,0,0,0)}:n.data("ccd");if(m.length>0){var s=(m.data("ccd")==0)?{installments:Array(0,0,0,0,0,0,0,0,0,0,0,0),totals:Array(0,0,0,0,0,0,0,0,0,0,0,0)}:m.data("ccd")}else{var s={installments:Array(0,0,0,0,0,0,0,0,0,0,0,0),totals:Array(0,0,0,0,0,0,0,0,0,0,0,0)}}var z=n.data("ccd-oncash");var w=n.data("inv");var t=0;if(m.length>0){t=m.data("inv");z+=m.data("ccd-oncash")}b("#pag-cartao li").each(function(A){b(this).text(A+1+"x: R$ "+(u.installments[A]+s.installments[A]).format(2,",","."))});b("#pag-cartao > p:nth-child(2) > span").text("R$ "+z.format(2,",","."));b("#pag-boleto > p:nth-child(3)").text("R$ "+(w+t).format(2,",","."));if(((b("#search-results input:checked")).length==1&&(w>0||t>0))||((b("#search-results input:checked")).length==2&&(w>0&&t>0))){b("#checkout-go").removeClass("disabled").removeAttr("disabled")}else{b("#checkout-go").addClass("disabled").attr("disabled",true)}if(!b("#dados-passageiros").hasClass("done")&&(w>0||t>0)){b("#passengers-block").html("");b("#passengers-chd-block").html("");for(i=0;i<q.PAX.QTD_PAX_ADL;i++){d.templatePassengerAdl.clone().removeClass("hide").html((d.templatePassengerAdl.html()).replace(/{{@index}}/g,i)).appendTo("#passengers-block")}for(i=0;i<q.PAX.QTD_PAX_CHD;i++){d.templatePassengerChd.clone().removeClass("hide").html((d.templatePassengerChd.html()).replace(/{{@index}}/g,i)).appendTo("#passengers-chd-block")}b("#passengers-adl-template").remove();b("#passengers-chd-template").remove();b("#dados-passageiros").addClass("done")}b("#payment-billet-option > div.content-payment span:nth-child(2)").text((w+t).format(2,",","."));b("#differential-price > p:nth-child(2) > span:nth-child(2)").text((u.installments[11]+s.installments[11]).format(2,",","."));if(z>0){b("#container-entrada > div > p").removeClass("hide").find("span:nth-child(2)").text(z.format(2,",","."))}else{b("#container-entrada > div > p").addClass("hide")}b("div.content-value-card label.select-form-parcela01 span.value").text((u.installments[2]+s.installments[2]).format(2,",","."));b("div.content-value-card label.select-form-parcela02 span.value").text((u.installments[5]+s.installments[5]).format(2,",","."));b("div.content-value-card label.select-form-parcela03 span.value").text((u.installments[11]+s.installments[11]).format(2,",","."));b("#parcelas option").each(function(A){if(A>0){b(this).text(A+"x de R$ "+(u.installments[A-1]+s.installments[A-1]).format(2,",","."))}});d.editDadosCheckout();d.validate();d.mask();var v=false;var y=u.totals[11]+s.totals[11];var x=d.monthlySpend+y;v=((x>d.ccdLimits.CCD_LIMIT_PERMISSION)||(y>d.ccdLimits.CCD_LIMIT_TRANSACTION)||(d.ccdLimits.CCD_LIMIT_FRAUD_GROUP!="A"&&d.ccdLimits.CCD_LIMIT_FRAUD_GROUP!="B"&&d.ccdLimits.CCD_LIMIT_FRAUD_GROUP!="C"&&d.ccdLimits.CCD_LIMIT_FRAUD_GROUP!="D"));console.log(d.ccdLimits.CCD_LIMIT_FRAUD_GROUP);if(v){b("#pag-cartao").addClass("hide").prev().css("width","503px");b("#payment-card-option").addClass("hide").prev().addClass("hide")}else{b("#pag-cartao").removeClass("hide").prev().css("width","171px");b("#payment-card-option").removeClass("hide").prev().removeClass("hide")}};if(this.getElementsByTagName("input")[0].checked){this.getElementsByTagName("input")[0].checked=false;b(this).next().slideUp(300,function(){this.classList.remove("show");return k.call(r)})}else{this.getElementsByTagName("input")[0].checked=true;h=true;d.editDadosCheckout();d.saveDadosCheckout();if(g=="#checkout-departure"){n.find(".div-card-details.show").slideUp(300,function(){this.classList.remove("show")})}else{m.find(".div-card-details.show").slideUp(300,function(){this.classList.remove("show")})}b(this).next().slideDown(300,function(){this.classList.add("show");return p.call(r)})}})},checkout:function(){var d=this;var c=function(e){outBoundID=b("#list-outbound input:checked").val();inBoundID=b("#list-inbound input:checked").val();b.ajax({type:"POST",data:b("form#msform").serialize()+"&"+b.param({outBoundFlightID:outBoundID,inBoundFlightID:inBoundID}),url:"ajax/checkout.ajx.php?action=step1",dataType:"json"}).done(function(f){b.get("static/js/tpl/checkout.handlebars",function(h){var h=Handlebars.compile(h);var g=h(f);b("#step4").html(g);d.editDadosCheckout();d.saveDadosCheckout();d.validate();d.mask()},"html")});return true};b(document).on("click","#next-step-3-1",function(e){if(b("input[name=select-form-pagamento]:checked").val()=="boleto"){return c(e)}});b(document).on("click","#next-step4",c)},createOrder:function(){b(document).on("click","#next-final",function(){var c=b(".salve-dados").parents(".field-passanger");if(!c.find("input").valid()){return true}else{c.find("input").attr("readonly","readonly")}outBoundID=b("#list-outbound input:checked").val();inBoundID=b("#list-inbound input:checked").val();b.ajax({type:"POST",data:b("form#msform").serialize()+"&"+b.param({outBoundFlightID:outBoundID,inBoundFlightID:inBoundID}),url:"ajax/createOrder.ajx.php?action=step5",dataType:"json"}).done(function(d){if(d.status==200){b("#step5 > div#processing").addClass("hide");b("#step5 > div#success").removeClass("hide")}else{b("#step5 > div#processing").addClass("hide");b("#step5 > div#error").removeClass("hide").find("#msg").text(d.error)}})});b(document).on("click","#nova-pesquisa",function(){document.location.reload(true)})},resultFix:function(){b(document).scrollTop(0);var d=b("#search-results"),c=b("#summary-purchase");if(c.length>0){headerOffset=c.offset().top}b(window).scroll(function(e){if(c.length>0&&b(document).scrollTop()>=headerOffset&&!d.hasClass("checkout-active")){c.addClass("fix-resumo");return true}c.removeClass("fix-resumo")})},filtroFix:function(){var g=b("#summary-purchase");var d=b(".filter-options-outbound");var f=b(".filter-options-inbound");var h=d.offset().top;var e=g.height()+parseInt(g.css("padding-top").replace("px",""))+2;var j=b("#list-inbound");var c=(j.length>0)?j.offset().top:0;b(window).scroll(function(l){e=g.height()+parseInt(g.css("padding-top").replace("px",""))+2;var m=b("#list-outbound > div > div:last-child");var k=b(document).scrollTop()+e;var n=m.height()+m.offset().top;if(k>=h&&k<=(n-3)){d.addClass("fix-filter").fadeIn("slow");return true}else{d.removeClass("fix-filter")}if(c>0){c=j.offset().top;if(k>=c){f.addClass("fix-filter");return true}else{f.removeClass("fix-filter")}}return true})},menuSort:function(){var c=this;b(document).on("click",function(d){var e=b(".menu-filter");if(c.clickFilter==true){e.attr("active","false");e.css("display","none")}});b(".click-filter").on("click",function(f){f.stopPropagation();var h=b(".menu-filter");h.attr("active","false");h.css("display","none");var g=b(this).parent();var e=g.find(".menu-filter");var d=e.attr("active");if(d=="false"){e.css("display","block");e.attr("active","true");c.clickFilter=true}else{e.css("display","none");e.removeAttr("active");c.clickFilter=false}})},clickManuSort:function(){var c=this;b(".menu-filter li a").on("click",function(f){var d=(b(this).parents("div")[1]).className;var h=b(this).data();var g=function(j,k){if(j=="filter-options-inbound"){c.inBoundList.sort(k.sort,{order:k.sortOrder});b("#checkout-return > div.cia-not-defined  > span").trigger("click")}else{c.outBoundList.sort(k.sort,{order:k.sortOrder});b("#checkout-departure > div.cia-not-defined  > span").trigger("click")}c.filtroFix();b(".menu-filter").css("display","none");return true};var e=function(j,k){c.filtroFix();b(".menu-filter").css("display","none");if(j=="filter-options-inbound"){b("#checkout-return > div.cia-not-defined > span").trigger("click");if(k.sortOrder=="all"){return c.inBoundList.filter()}c.inBoundList.filter(function(l){return(l.values()[k.sort]==k.sortOrder)})}else{b("#checkout-departure > div.cia-not-defined > span").trigger("click");if(k.sortOrder=="all"){return c.outBoundList.filter()}c.outBoundList.filter(function(l){return(l.values()[k.sort]==k.sortOrder)})}};if(h.sortMethod==undefined||h.sortMethod=="sort"){return g(d,h)}else{if(h.sortMethod=="filter"){return e(d,h)}}})},steps:function(){var c=this;b(document).on("click",".bt-next",function(){if(!c.checkoutForm.valid()){return false}var e,f,d;e=b(this).parent();f=b(this).parent().next();if(this.id=="next-step-3-1"&&b("#select-radio-payment-billet").is(":checked")){b("#count li span").eq(b(".step-box").index(f)).children().addClass("active-step");f=b(this).parent().next().next()}b("#count li").eq(b(".step-box").index(e)).children().addClass("active-step");b("#count li").eq(b(".step-box").index(f)).children().first().addClass("active-step");e.removeClass("ativo").css("display","none");f.fadeIn().addClass("ativo");c.mask()});b(document).on("click",".bt-prev",function(){current_fs=b(this).parent();previous_fs=b(this).parent().prev();if(this.id=="previous-step3"&&b("#select-radio-payment-billet").is(":checked")){b("#count li").eq(b(".step-box").index(previous_fs)).children().first().removeClass("active-step");previous_fs=b(this).parent().prev().prev()}b("#count li").eq(b(".step-box").index(current_fs)).children().removeClass("active-step");b("#count li").eq(b(".step-box").index(previous_fs)).children().last().removeClass("active-step");previous_fs.fadeIn().addClass("ativo");current_fs.removeClass("ativo").css("display","none");c.mask()})},mask:function(){b.mask.definitions["~"]="[0-9-]";b(".nascimento").mask("99/99/9999");b("#cep1").mask("99999");b("#cep2").mask("999");b(".cep1").mask("99999");b(".cep2").mask("999");b(".ddd").mask("?99");b("#cc").mask("9999 9999 9999 ?9999");b(".telefone").mask("9999-9999");b("#dados-celular").mask("9999-9999?9");b(".cpf").mask("~~~.~~~.~~~-~~");b(".numbersLogrado").mask("999999");b(".datevalid").mask("99/9999");b(".celular").focusout(function(){var c,d;d=b(this);d.unmask();c=d.val().replace(/\D/g,"");if(c.length<10&&d.attr("id")=="dados-celular"){d.mask("99999-999?9")}else{d.mask("(99) 9999-9999?9")}}).trigger("focusout");b(".celular-passanger").focusout(function(){var c,d;d=b(this);d.unmask();c=d.val().replace(/\D/g,"");if(c.length>10){d.mask("(99) 99999-999?9")}else{d.mask("(99) 9999-9999?9")}}).trigger("focusout")},validate:function(){var d=this;jQuery.validator.messages.required="Favor preencher este campo.";jQuery.validator.messages.email="Este email está incorreto.";d.checkoutForm=b("form#msform");d.checkoutForm.validate({focusInvalid:true,onkeyup:false,errorClass:"has-error",errorElement:"em",highlight:function(g,e,f){b(g).parent().addClass(e).removeClass(f)},unhighlight:function(g,e,f){b(g).parent().removeClass(e).addClass(f)},rules:{"select-cartoes":{required:true}}});jQuery.validator.messages.required="Favor preencher este campo.";jQuery.validator.messages.email="Este email está incorreto.";var c=b("form#main-search");c.validate({focusInvalid:true,onkeyup:false,noValidate:false,errorClass:"has-error",validClass:"has-success",errorElement:"em",highlight:function(g,e,f){b(g).parent().addClass(e).removeClass(f)},unhighlight:function(g,e,f){b(g).parent().removeClass(e).addClass(f)}});jQuery.validator.addMethod("datevalid",function(k,j){var e=false;var l=/^\d{1,2}\/\d{4}$/;if(l.test(k)){var n=k.split("/");var g=parseInt(n[0],10);var h=parseInt(n[1],10);var f=new Date();var m=new Date(h,g-1);if(h>=(new Date().getFullYear())&&(h<(new Date().getFullYear()+20))){if(h==(new Date().getFullYear())){e=((g-1>=f.getMonth()))}else{e=true}}else{e=false}}return this.optional(j)||e},"Insira uma data válida");jQuery.validator.addMethod("datebirthday",function(j,h){var e=false;var l=/^\d{1,2}\/\d{1,2}\/\d{4}$/;if(l.test(j)){var n=j.split("/");var k=parseInt(n[0],10);var f=parseInt(n[1],10);var g=parseInt(n[2],10);var m=new Date(g,f-1,k);if((m.getFullYear()==g)&&(m.getMonth()==f-1)&&(m.getDate()==k)){e=(g<=(new Date().getFullYear()-12))}else{e=false}}else{e=false}return this.optional(h)||e},"Insira uma data válida");jQuery.validator.addMethod("datebirthday-chd",function(j,h){var e=false;var l=/^\d{1,2}\/\d{1,2}\/\d{4}$/;if(l.test(j)){var n=j.split("/");var k=parseInt(n[0],10);var f=parseInt(n[1],10);var g=parseInt(n[2],10);var m=new Date(g,f-1,k);if((m.getFullYear()==g)&&(m.getMonth()==f-1)&&(m.getDate()==k)){e=((g<=(new Date().getFullYear()-2))&&(g>=(new Date().getFullYear()-11)))}else{e=false}}else{e=false}return this.optional(h)||e},"Insira uma data válida");jQuery.validator.addMethod("datecard",function(j,h){var e=false;var l=/^\d{1,2}\/\d{1,2}\/\d{4}$/;if(l.test(j)){var n=j.split("/");var k=parseInt(n[0],10);var f=parseInt(n[1],10);var g=parseInt(n[2],10);var m=new Date(g,f-1,k);if((m.getFullYear()==g)&&(m.getMonth()==f-1)&&(m.getDate()==k)){e=(g<=(new Date().getFullYear()-18))}else{e=false}}else{e=false}return this.optional(h)||e},"Insira uma data válida");b(".numbers").keypress(function(f){var e=(window.event)?f.keyCode:f.which;if((e>47&&e<58)||e==9){return true}else{if(e!=8){return false}else{return true}}})},radiocard:function(){b(document).on("click","#select-radio-payment-billet",function(c){if(b(this)[0].checked){b(".content-value-card").fadeOut(300)}});b(document).on("click","#select-radio-payment-card",function(c){b(".content-value-card").fadeIn(500);b("#numcartao").focus()})},helpers:function(){Number.prototype.format=function(m,k,g){var l=this,m=isNaN(m=Math.abs(m))?2:m,k=k==undefined?".":k,g=g==undefined?",":g,h=l<0?"-":"",f=parseInt(l=Math.abs(+l||0).toFixed(m))+"",e=(e=f.length)>3?e%3:0;return h+(e?f.substr(0,e)+g:"")+f.substr(e).replace(/(\d{3})(?=\d)/g,"$1"+g)+(m?k+Math.abs(l-f).toFixed(m).slice(2):"")};this.object_keys=function(e){var d=[];for(var c in e){if(!e.hasOwnProperty(c)){continue}d.push(c)}return d};this.validGol=function(f){var g=f.split("/");var e=new Date();var d=Date.parse(new Date(e.getFullYear(),e.getMonth(),e.getDate()))+(172800*1000);var c=Date.parse(new Date(g[2],g[1]-1,g[0]));return c>d};this.replaceSpecialChars=function(h){var e=[{value:"a",lets:"áàãâä"},{value:"e",lets:"éèêë"},{value:"i",lets:"íìîï"},{value:"o",lets:"óòõôö"},{value:"u",lets:"úùûü"},{value:"c",lets:"ç"},{value:"A",lets:"ÁÀÃÂÄ"},{value:"E",lets:"ÉÈÊË"},{value:"I",lets:"ÍÌÎÏ"},{value:"O",lets:"ÓÒÕÔÖ"},{value:"U",lets:"ÚÙÛÜ"},{value:"C",lets:"Ç"},{value:"",lets:"?!()[]{}"},{value:"",lets:"?"},{value:"",lets:"!"},{value:"",lets:"("},{value:"",lets:")"},{value:"",lets:"["},{value:"",lets:"]"},{value:"",lets:"{"},{value:"",lets:"}"}];var g="_";var f;var d=h;var c=e.length;for(i=0;i<c;i++){f=new RegExp("["+e[i].lets+"]","g");d=d.replace(f,e[i].value);f=null}return d.replace(/\s/g,g)};this.tratarAlias=function(c){var d;return d=this.replaceSpecialChars(c).toLowerCase()}},ontop:function(){b(document).ready(function(){b(".subir").click(function(){b("html, body").animate({scrollTop:0},"slow");return false})})},estados:function(){b(document).ready(function(){b("#estados").change(function(){b.ajax({type:"POST",url:"static/data/cidades.ajx.php",data:{montadora:b("#estados").val()},dataType:"json",success:function(d){var c="";b.each(d,function(e,f){c+='<option value="'+f+'">'+f+"</option>"});b("#cidades").html(c)}})})})},triggerResult:function(){var e=this,d=b("#summary-purchase"),c=d.height()+parseInt(d.css("padding-top").replace("px",""))+2;b("#remover-voo-outbound").on("click",function(f){b("#list-outbound input:checked").trigger("click");return true});b("#remover-voo-inbound").on("click",function(f){b("#list-inbound input:checked").trigger("click");return true});b("#checkout-departure div a.info-ver").on("click",function(f){b("html, body").animate({scrollTop:b("#list-outbound input:checked").offset().top-175},1000);e.filtroFix();return true});b("#checkout-return div a.info-ver").on("click",function(f){b("html, body").animate({scrollTop:b("#list-inbound input:checked").offset().top-175},1000);e.filtroFix();return true});b("#checkout-departure > div.cia-not-defined  > span").on("click",function(f){var g=b("#search-results");b("html, body").animate({scrollTop:g.offset().top+40},1000);e.filtroFix();return true});b("#checkout-return > div.cia-not-defined  > span").on("click",function(g){var f=b("#date-flight-inbound");b("html, body").animate({scrollTop:f.offset().top-150},1000);e.filtroFix();return true})},menuUser:function(){var c=this;b(document).on("click",function(){if(c.clickMenuUser){b("#menu-user").slideUp("fast",function(d){c.clickMenuUser=false})}});b("#bt-menu-user").on("click",function(d){d.stopPropagation();if(c.clickMenuUser){b("#menu-user").slideUp("fast",function(e){c.clickMenuUser=false})}else{b("#menu-user").slideDown("fast",function(e){c.clickMenuUser=true})}})},changeradioParcelas:function(){b("#parcelas").change(function(){b("#parcelas option:selected").each(function(){b(".option-card-value").find("input[type='radio']").prop("checked",false)})});b("input[name='select-form-parcela']").on("click",function(c){var d=b(this);b("#parcelas").val("0");d.attr("checked",true)})},editDadosCheckout:function(){var c=this;b(".edit-dados").on("click",function(){var d=b(this).parents(".field-passanger");if(d.hasClass("passager")||d.length==0){b('textarea[name="passenger-observation_rev"]').removeAttr("readonly");d=b(this).parents(".passager")}else{d.find("input").removeAttr("readonly")}b(this).addClass("hidden");d.find("a.salve-dados").removeClass("hidden");c.mask()})},saveDadosCheckout:function(){var c=this;var d=b(".salve-dados").parents(".field-passanger");b(".salve-dados").on("click",function(){d=b(this).parents(".field-passanger");if(d.hasClass("passager")||d.length==0){b('textarea[name="passenger-observation_rev"]').attr("readonly","readonly");d=b(this).parents(".passager")}else{if(d.find("input").valid()){d.find("input").attr("readonly","readonly")}else{d.find("input").removeAttr("readonly","readonly");return true}}b(this).addClass("hidden");d.find("a.edit-dados").removeClass("hidden")});d.find("input").change(function(e){e.preventDefault();if(!b(this).valid()){console.log("$(this)");console.log(b(this))}c.mask()})},frasesLoading:function(c){var f=this;var d=b("#frases ul li").outerWidth(),e=7000;f.rotateSlider=(f.rotateSlider==null)?setInterval(g,e):f.rotateSlider;c=(c==undefined)?"":"clearInterval";if(c=="clearInterval"){clearInterval(f.rotateSlider);return false}b("#frases").hover(function(){clearInterval(f.rotateSlider)},function(){f.rotateSlider=setInterval(g,e)});function g(){b("#frases ul").css({width:"99999%"}).animate({left:-d},function(){b("#frases ul li").last().after(b("#frases ul li").first());b(this).css({left:"0",width:"auto"})})}}}})(jQuery);$(document).ready(function(){var a=$.mainBuscaFacil;a.init();a.helpers();a.autocomplete();a.datepicker();a.checkSearchDirectionFlight();a.toggleRadio();a.radiocard();a.ontop();a.estados();a.Search();a.steps();a.validate();a.mask();a.checkout();a.createOrder();a.menuUser();console.log("%cEssa é uma ferramenta para desenvolvedores. Não copie ou cole dados aqui, isso poderá comprometer a segurança da sua conta e dos seus dados!%c ©Copyright 2014 | Milhas Fácil","color: red; font-size: x-large","color: #6fb020; font-size: large")});